# QuantConsole å¼€å‘æŒ‡å—

## é¡¹ç›®ä»‹ç»
QuantConsole æ˜¯ä¸€ä¸ªä¸“ä¸šçš„åŠ å¯†è´§å¸çŸ­çº¿äº¤æ˜“æ§åˆ¶å°ç½‘ç«™ï¼Œä¸ºäº¤æ˜“è€…æä¾›å®æ—¶å¸‚åœºæ•°æ®ã€äº¤æ˜“è®°å½•ç®¡ç†å’Œå¤šäº¤æ˜“æ‰€é›†æˆåŠŸèƒ½ã€‚

## å¼€å‘ç¯å¢ƒè®¾ç½®

### å‰ç«¯å¼€å‘ç¯å¢ƒ
1. **Node.js**: ç‰ˆæœ¬ 18+
2. **åŒ…ç®¡ç†å™¨**: æ¨èä½¿ç”¨ pnpm
3. **ç¼–è¾‘å™¨**: VS Code + æ¨èæ‰©å±•
   - TypeScript Hero
   - ES7+ React/Redux/React-Native snippets
   - Tailwind CSS IntelliSense
   - Prettier - Code formatter
   - ESLint

### åç«¯å¼€å‘ç¯å¢ƒ
1. **Rust**: æœ€æ–°ç¨³å®šç‰ˆæœ¬
2. **æ•°æ®åº“**: MySQL 8.0+
3. **å·¥å…·**:
   - sea-orm-cli (æ•°æ®åº“ ORM å·¥å…·)
   - cargo-watch (è‡ªåŠ¨é‡è½½)
   - diesel_cli (å¤‡é€‰ ORM å·¥å…·)

### å¼€å‘å·¥å…·é“¾
```bash
# å®‰è£…å‰ç«¯ä¾èµ–
pnpm install

# å®‰è£… Rust å·¥å…·
cargo install sea-orm-cli
cargo install cargo-watch
cargo install sqlx-cli

# æ•°æ®åº“è®¾ç½®
mysql -u root -p
CREATE DATABASE quantconsole;
```

## é¡¹ç›®ç»“æ„è§„èŒƒ

### æ•´ä½“é¡¹ç›®ç»“æ„
```
QuantConsole/
â”œâ”€â”€ frontend/              # React å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hooks/         # è‡ªå®šä¹‰ hooks
â”‚   â”‚   â”œâ”€â”€ services/      # API æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ types/         # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ styles/        # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ public/            # é™æ€èµ„æº
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/               # Rust åç«¯ API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ handlers/      # HTTP å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ models/        # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/      # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ config/        # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ main.rs
â”‚   â”œâ”€â”€ migrations/        # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â””â”€â”€ Cargo.toml
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ scripts/              # æ„å»ºå’Œéƒ¨ç½²è„šæœ¬
â””â”€â”€ README.md
```

## ä»£ç è§„èŒƒ

### TypeScript/React è§„èŒƒ
```typescript
// ç»„ä»¶å®šä¹‰
interface UserProfileProps {
  userId: string;
  onUserUpdate?: (user: User) => void;
}

const UserProfile: React.FC<UserProfileProps> = ({
  userId,
  onUserUpdate
}) => {
  // hooks åœ¨ç»„ä»¶é¡¶éƒ¨
  const [loading, setLoading] = useState(false);
  const { data: user, error } = useQuery(['user', userId], () =>
    fetchUser(userId)
  );

  // æ—©æœŸè¿”å›
  if (error) {
    return <ErrorComponent error={error} />;
  }

  return (
    <div className="user-profile">
      {/* JSX å†…å®¹ */}
    </div>
  );
};
```

### Rust ä»£ç è§„èŒƒ
```rust
// é”™è¯¯å¤„ç†
use anyhow::Result;
use serde::{Deserialize, Serialize};

#[derive(Serialize, Deserialize, Debug)]
pub struct CreateUserRequest {
    pub username: String,
    pub email: String,
    pub password: String,
}

#[derive(Serialize)]
pub struct ApiResponse<T> {
    pub success: bool,
    pub data: Option<T>,
    pub message: Option<String>,
}

impl<T> ApiResponse<T> {
    pub fn success(data: T) -> Self {
        Self {
            success: true,
            data: Some(data),
            message: None,
        }
    }

    pub fn error(message: String) -> Self {
        Self {
            success: false,
            data: None,
            message: Some(message),
        }
    }
}

// å¤„ç†å™¨å‡½æ•°
pub async fn create_user(
    req: web::Json<CreateUserRequest>
) -> Result<HttpResponse> {
    match user_service::create_user(req.into_inner()).await {
        Ok(user) => Ok(HttpResponse::Created().json(
            ApiResponse::success(user)
        )),
        Err(e) => Ok(HttpResponse::BadRequest().json(
            ApiResponse::<()>::error(e.to_string())
        )),
    }
}
```

## API è®¾è®¡è§„èŒƒ

### RESTful API ç«¯ç‚¹
```
# ç”¨æˆ·ç®¡ç†
POST   /api/auth/register     # ç”¨æˆ·æ³¨å†Œ
POST   /api/auth/login        # ç”¨æˆ·ç™»å½•
POST   /api/auth/logout       # ç”¨æˆ·ç™»å‡º
GET    /api/auth/me          # è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

# äº¤æ˜“è®°å½•
GET    /api/trades           # è·å–äº¤æ˜“è®°å½•åˆ—è¡¨
POST   /api/trades           # åˆ›å»ºäº¤æ˜“è®°å½•
PUT    /api/trades/:id       # æ›´æ–°äº¤æ˜“è®°å½•
DELETE /api/trades/:id       # åˆ é™¤äº¤æ˜“è®°å½•

# äº¤æ˜“æ‰€é…ç½®
GET    /api/exchanges        # è·å–äº¤æ˜“æ‰€é…ç½®
POST   /api/exchanges        # æ·»åŠ äº¤æ˜“æ‰€é…ç½®
PUT    /api/exchanges/:id    # æ›´æ–°äº¤æ˜“æ‰€é…ç½®
DELETE /api/exchanges/:id    # åˆ é™¤äº¤æ˜“æ‰€é…ç½®

# å¸‚åœºæ•°æ®
GET    /api/markets/prices   # è·å–ä»·æ ¼æ•°æ®
GET    /api/markets/tickers  # è·å–è¡Œæƒ…æ•°æ®
```

### WebSocket ç«¯ç‚¹
```
# å®æ—¶æ•°æ®è®¢é˜…
ws://localhost:8080/ws/prices     # ä»·æ ¼æ•°æ®æµ
ws://localhost:8080/ws/trades     # äº¤æ˜“æ•°æ®æµ
ws://localhost:8080/ws/orders     # è®¢å•æ•°æ®æµ
```

## æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„
```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- äº¤æ˜“æ‰€é…ç½®è¡¨
CREATE TABLE exchange_configs (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL,
    exchange_name VARCHAR(50) NOT NULL,
    api_key_encrypted TEXT NOT NULL,
    api_secret_encrypted TEXT NOT NULL,
    is_testnet BOOLEAN DEFAULT FALSE,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- äº¤æ˜“è®°å½•è¡¨
CREATE TABLE trades (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL,
    exchange_config_id BIGINT NOT NULL,
    symbol VARCHAR(20) NOT NULL,
    side ENUM('buy', 'sell') NOT NULL,
    quantity DECIMAL(20, 8) NOT NULL,
    price DECIMAL(20, 8) NOT NULL,
    total DECIMAL(20, 8) NOT NULL,
    fee DECIMAL(20, 8) DEFAULT 0,
    trade_time TIMESTAMP NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (exchange_config_id) REFERENCES exchange_configs(id)
);
```

## æµ‹è¯•ç­–ç•¥

### å‰ç«¯æµ‹è¯•
```typescript
// ç»„ä»¶æµ‹è¯•ç¤ºä¾‹
import { render, screen, fireEvent } from '@testing-library/react';
import { UserProfile } from './UserProfile';

describe('UserProfile', () => {
  test('renders user information correctly', () => {
    const mockUser = { id: '1', name: 'John Doe', email: 'john@example.com' };
    render(<UserProfile user={mockUser} />);

    expect(screen.getByText('John Doe')).toBeInTheDocument();
    expect(screen.getByText('john@example.com')).toBeInTheDocument();
  });
});
```

### åç«¯æµ‹è¯•
```rust
// é›†æˆæµ‹è¯•ç¤ºä¾‹
#[cfg(test)]
mod tests {
    use super::*;
    use actix_web::{test, App};

    #[actix_web::test]
    async fn test_create_user() {
        let app = test::init_service(
            App::new().route("/users", web::post().to(create_user))
        ).await;

        let req = test::TestRequest::post()
            .uri("/users")
            .set_json(&CreateUserRequest {
                username: "testuser".to_string(),
                email: "test@example.com".to_string(),
                password: "password123".to_string(),
            })
            .to_request();

        let resp = test::call_service(&app, req).await;
        assert!(resp.status().is_success());
    }
}
```

## éƒ¨ç½²æŒ‡å—

### Docker é…ç½®
```dockerfile
# å‰ç«¯ Dockerfile
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

```dockerfile
# åç«¯ Dockerfile
FROM rust:1.70 AS builder
WORKDIR /app
COPY Cargo.toml Cargo.lock ./
COPY src ./src
RUN cargo build --release

FROM debian:bullseye-slim
RUN apt-get update && apt-get install -y ca-certificates && rm -rf /var/lib/apt/lists/*
COPY --from=builder /app/target/release/quantconsole-backend /usr/local/bin/app
EXPOSE 8080
CMD ["app"]
```

### Docker Compose
```yaml
version: '3.8'
services:
  frontend:
    build: ./frontend
    ports:
      - "3000:80"
    depends_on:
      - backend

  backend:
    build: ./backend
    ports:
      - "8080:8080"
    environment:
      - DATABASE_URL=mysql://user:password@db:3306/quantconsole
      - JWT_SECRET=your-secret-key
    depends_on:
      - db

  db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: quantconsole
      MYSQL_USER: user
      MYSQL_PASSWORD: password
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql

volumes:
  mysql_data:
```

## å®‰å…¨æ£€æŸ¥æ¸…å•

### å‰ç«¯å®‰å…¨
- [ ] æ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½è¿›è¡ŒéªŒè¯
- [ ] æ•æ„Ÿä¿¡æ¯ä¸å­˜å‚¨åœ¨ localStorage
- [ ] å®ç° CSP (Content Security Policy)
- [ ] ä½¿ç”¨ HTTPS
- [ ] å®šæœŸæ›´æ–°ä¾èµ–åŒ…

### åç«¯å®‰å…¨
- [ ] å®ç°è¯·æ±‚é™æµ
- [ ] API å¯†é’¥åŠ å¯†å­˜å‚¨
- [ ] è¾“å…¥éªŒè¯å’Œ SQL æ³¨å…¥é˜²æŠ¤
- [ ] å®ç° CORS ç­–ç•¥
- [ ] æ—¥å¿—è®°å½•å’Œç›‘æ§

### æ•°æ®åº“å®‰å…¨
- [ ] ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
- [ ] æœ€å°æƒé™åŸåˆ™
- [ ] å®šæœŸå¤‡ä»½
- [ ] åŠ å¯†æ•æ„Ÿå­—æ®µ
- [ ] å®¡è®¡æ—¥å¿—

## ğŸš€ æ–°åŠŸèƒ½å¼€å‘æŒ‡å—

### ä»·æ ¼ç›‘æ§ç³»ç»Ÿå¼€å‘
```typescript
// å‰ç«¯ç»„ä»¶ç»“æ„
components/
â”œâ”€â”€ PriceBoard/
â”‚   â”œâ”€â”€ TokenWatchList.tsx          # å…³æ³¨ä»£å¸åˆ—è¡¨
â”‚   â”œâ”€â”€ PriceChart.tsx             # ä»·æ ¼å›¾è¡¨
â”‚   â”œâ”€â”€ ExchangeSelector.tsx       # äº¤æ˜“æ‰€é€‰æ‹©å™¨
â”‚   â””â”€â”€ AlertManager.tsx           # æé†’ç®¡ç†
```

```rust
// åç«¯æ¨¡å—ç»“æ„
src/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ price_monitor.rs           # ä»·æ ¼ç›‘æ§æœåŠ¡
â”‚   â”œâ”€â”€ alert_engine.rs            # æé†’å¼•æ“
â”‚   â””â”€â”€ exchange_connector.rs      # äº¤æ˜“æ‰€è¿æ¥å™¨
```

### äº¤æ˜“ç­–ç•¥ç³»ç»Ÿå¼€å‘
```typescript
// ç­–ç•¥ç¼–è¾‘å™¨ç»„ä»¶
components/
â”œâ”€â”€ StrategyBuilder/
â”‚   â”œâ”€â”€ ConditionBuilder.tsx       # æ¡ä»¶æ„å»ºå™¨
â”‚   â”œâ”€â”€ IndicatorSelector.tsx      # æŒ‡æ ‡é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ StrategyTester.tsx         # ç­–ç•¥å›æµ‹
â”‚   â””â”€â”€ TemplateLibrary.tsx        # ç­–ç•¥æ¨¡æ¿åº“
```

### æ™ºèƒ½äº¤æ˜“æœºå™¨äººå¼€å‘
```rust
// äº¤æ˜“æœºå™¨äººæ ¸å¿ƒæ¨¡å—
src/
â”œâ”€â”€ bot/
â”‚   â”œâ”€â”€ copy_trader.rs             # å¤åˆ¶äº¤æ˜“
â”‚   â”œâ”€â”€ wallet_tracker.rs          # é’±åŒ…è¿½è¸ª
â”‚   â”œâ”€â”€ signal_processor.rs        # ä¿¡å·å¤„ç†
â”‚   â””â”€â”€ execution_engine.rs        # æ‰§è¡Œå¼•æ“
```

### å¼€å‘è§„èŒƒè¡¥å……

#### WebSocket è¿æ¥ç®¡ç†
```typescript
// å®æ—¶æ•°æ®è¿æ¥æ ‡å‡†
interface WebSocketManager {
  connect(exchange: string): Promise<WebSocket>;
  subscribe(symbol: string, callback: (data: PriceData) => void): void;
  unsubscribe(symbol: string): void;
  reconnect(): void;
}
```

#### äº¤æ˜“æ‰€ API é›†æˆæ ‡å‡†
```rust
// ç»Ÿä¸€äº¤æ˜“æ‰€æ¥å£
pub trait ExchangeAPI {
    async fn get_price(&self, symbol: &str) -> Result<Price>;
    async fn place_order(&self, order: Order) -> Result<OrderResult>;
    async fn get_balance(&self) -> Result<Balance>;
    async fn get_order_history(&self) -> Result<Vec<Order>>;
}
```

è¿™ä¸ªå¼€å‘æŒ‡å—ä¸ºå›¢é˜Ÿæä¾›äº†å®Œæ•´çš„å¼€å‘æ¡†æ¶å’Œæœ€ä½³å®è·µï¼Œç¡®ä¿é¡¹ç›®çš„é«˜è´¨é‡äº¤ä»˜ã€‚
