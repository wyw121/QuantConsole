# 永续合约数据源使用指南

## 🚀 快速启动

您的 QuantConsole 已成功切换到永续合约数据源！以下是使用指南：

### 启动服务

```bash
# 启动前端开发服务器
cd frontend
npm run dev

# 前端将运行在 http://localhost:3001
```

### 📊 支持的数据源

| 数据源 | 状态 | 描述 |
|--------|------|------|
| 🟢 **OKX Perpetual** | 活跃 | OKX 永续合约实时数据 |
| 🟢 **Binance Futures** | 活跃 | 币安期货合约实时数据 |
| 🟡 **CoinGecko** | 备用 | 市场数据聚合服务 |
| 🟢 **模拟永续合约** | 总是可用 | 本地模拟数据 |

### 🎯 主要功能

#### 1. 实时价格数据
- ✅ 永续合约实时价格
- ✅ 24小时价格变动
- ✅ 24小时交易量
- ✅ 最高/最低价格

#### 2. 交易对支持
```
BTC-USDT-SWAP    (OKX格式)
BTCUSDT          (Binance格式)
ETH-USDT-SWAP    (OKX格式)
ETHUSDT          (Binance格式)
... 其他主流永续合约
```

#### 3. K线图数据
- ✅ 1分钟K线实时更新
- ✅ 基于永续合约价格
- ✅ 开高低收价格数据

#### 4. 订单簿深度
- ✅ 实时买卖盘数据
- ✅ 价格深度显示
- ✅ 订单量信息

### 🔧 数据源切换

在应用中可以通过界面切换不同的数据源：

1. **访问交易所选择器**
2. **选择数据源**：
   - CoinGecko (默认)
   - Binance Futures
   - OKX Perpetual
   - 模拟永续合约

### 🌐 网络要求

由于使用了CORS代理来访问交易所API，可能会遇到以下情况：

- ✅ **本地开发**: 模拟数据总是可用
- ⚠️ **网络限制**: 真实API可能需要特定网络环境
- 🔄 **自动回退**: 连接失败时自动切换到模拟数据

### 📱 用户界面特性

#### 交易所标识
- 🟦 **永续合约** - 支持永续合约交易
- 🟣 **期权** - 支持期权交易
- 🟢 **实时** - 提供实时数据流

#### 连接状态
- 🟢 **已连接** - 数据源正常工作
- 🟡 **连接中** - 正在建立连接
- 🔴 **未连接** - 连接失败或未启动
- ❌ **连接错误** - 需要检查配置

### 🔍 调试信息

打开浏览器开发者工具查看详细日志：

```
✅ OKX 成功获取 XX 个永续合约数据
📊 Binance 期货成功获取 XX 个合约数据
🔗 WebSocket 连接成功
📡 已订阅实时数据流
```

### ⚠️ 注意事项

1. **数据类型**: 现在所有数据都是永续合约数据，不再显示现货价格
2. **风险提示**: 永续合约具有杠杆特性，风险较高
3. **实时性**: 数据更新频率取决于网络状况和API限制
4. **交易对**: 不同交易所的交易对格式可能不同

### 🛠️ 故障排除

#### 问题：无法获取实时数据
**解决方案**:
1. 检查网络连接
2. 尝试切换数据源
3. 使用模拟数据进行开发

#### 问题：WebSocket连接失败
**解决方案**:
1. 检查防火墙设置
2. 尝试不同的WebSocket端点
3. 查看浏览器控制台错误信息

#### 问题：交易对显示异常
**解决方案**:
1. 确认交易对格式正确
2. 检查API返回数据
3. 验证交易所是否支持该永续合约

---

🎉 **恭喜！您的短线交易控制台现在完全专注于永续合约数据，为专业交易提供更精准的市场信息！**
